const j="http://localhost:3000";document.addEventListener("DOMContentLoaded",async()=>{const i=new URLSearchParams(window.location.search).get("id"),s=document.querySelector("[dev-target=listing-wrapper]"),a=document.querySelector("[dev-target=image-list-desktop-wrapper]"),c=document.querySelector("[dev-target=listing-loader]"),l=document.querySelector("[dev-target=image-item-desktop-template]"),g=document.querySelector("[dev-target=image-item-tablet-wrap]"),d=document.querySelector("[dev-target=image-item-tablet-template]"),m=document.querySelector("[dev-target=title]"),p=document.querySelector("[dev-target=price]"),u=document.querySelector("[dev-target=contact-us]"),h=document.querySelector("[dev-target=floor-plan]"),w=document.querySelector("[dev-target=description]");if(!s||!c||!a||!l||!g||!d||!m||!p||!u||!h||!w)return console.error("Missing element");if(!i)return console.error("Missing id");try{const e=await T(Number(i));console.log({listing:e}),y({imageItemDesktopTemplate:l,imageItemTabletTemplate:d,imageItemTabletWrap:g,imageListDesktopWrapper:a,listing:e,listingLoader:c,listingWrapper:s,listingContactUs:u,listingDescription:w,listingFloorPlan:h,listingPrice:p,listingTitle:m})}catch(e){console.error("Something went wrong",e)}function y({listing:e,listingWrapper:t,listingLoader:b,imageListDesktopWrapper:f,imageItemDesktopTemplate:q,imageItemTabletWrap:S,imageItemTabletTemplate:L,listingTitle:k,listingPrice:D,listingContactUs:E,listingFloorPlan:I,listingDescription:P}){const C=e.photos.slice(0,3),$=e.photos.slice(0,8);f.innerHTML="",S.innerHTML="",C.map(n=>{const r=q.cloneNode(!0),o=r.querySelector("[dev-target=listing-image]");if(!o)return console.error("dev-target=listing-image not found");o.src=n.original,o.srcset="",f.appendChild(r)}),$.map(n=>{const r=L.cloneNode(!0),o=r.querySelector("[dev-target=listing-image]");if(!o)return console.error("dev-target=listing-image not found");o.src=n.original,o.srcset="",S.appendChild(r)}),window.Webflow.require("slider").redraw(),window.dispatchEvent(new Event("resize")),k.innerText=`${e.bedrooms} BED, ${e.bathrooms} BATH`,D.innerText=`$${Number(e.price).toLocaleString()}`,E.href="#",I.href="#",P.textContent=e.description,v({element:b,toggle:"hide"}),v({element:t,toggle:"show"})}async function T(e){try{const t=await fetch(`${j}/api/listings/${e}`);if(!t.ok)throw new Error("Failed to fetch job");return await t.json()}catch(t){throw console.error("Error fetching job:",t),t}}function v({element:e,toggle:t}){t==="show"?e.setAttribute("dev-hide","false"):e.setAttribute("dev-hide","true")}});
//# sourceMappingURL=listing.js.map
